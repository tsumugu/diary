{"remainingRequest":"/Users/tsumugu/Documents/dev/vue/diary/node_modules/babel-loader/lib/index.js!/Users/tsumugu/Documents/dev/vue/diary/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/tsumugu/Documents/dev/vue/diary/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tsumugu/Documents/dev/vue/diary/src/views/RegistEventInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tsumugu/Documents/dev/vue/diary/src/views/RegistEventInfo.vue","mtime":1608394839908},{"path":"/Users/tsumugu/Documents/dev/vue/diary/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tsumugu/Documents/dev/vue/diary/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tsumugu/Documents/dev/vue/diary/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tsumugu/Documents/dev/vue/diary/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mcm9tIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgSW1nVXBsb2FkZXIgZnJvbSAnLi4vYXNzZXRzL0ltZ1VwbG9hZGVyLmpzJzsKaW1wb3J0IFBsYWNlc01hbmFnZXIgZnJvbSAnLi4vYXNzZXRzL1BsYWNlc01hbmFnZXIuanMnOwppbXBvcnQgZmlyZWJhc2UgZnJvbSAnZmlyZWJhc2UnOwp2YXIgZGF0YWJhc2UgPSBmaXJlYmFzZS5kYXRhYmFzZSgpOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogInJlZ2lzdCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzU2lnbkluOiBudWxsLAogICAgICB1c2VySW5mbzogbnVsbCwKICAgICAgaXNOb3dMb2FkaW5nOiB0cnVlLAogICAgICBJVTogbnVsbCwKICAgICAgUE06IG51bGwsCiAgICAgIHVwbG9hZEZpbGVzOiBudWxsLAogICAgICB1cGxvYWRQcm9taXNlTGlzdDogW10sCiAgICAgIHByZXZpZXdJbWFnZUxpc3Q6IFtdLAogICAgICBzdWJtaXRJbWFnZVVybExpc3Q6IFtdLAogICAgICBzZWFyY2hSZXN1bHRQbGFjZUxpc3Q6IFtdLAogICAgICB1c2VyQWRkZWRQbGFjZUxpc3Q6IFtdLAogICAgICBuZWFyYnlQbGFjZUxpc3Q6IFtdLAogICAgICBwbGFjZUxpc3Q6IFtdLAogICAgICBmcmllbmRzTGlzdDogW10sCiAgICAgIHdoZXJlQWRkOiBudWxsLAogICAgICB3aG9BZGQ6IG51bGwsCiAgICAgIHdoZW46IG51bGwsCiAgICAgIHdoZXJlOiBudWxsLAogICAgICB3aG86IG51bGwsCiAgICAgIHdoYXQ6IG51bGwKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgaXNTaWduSW46IGZ1bmN0aW9uIGlzU2lnbkluKGFmdGVyLCBiZWZvcmUpIHsKICAgICAgaWYgKGJlZm9yZSA9PSBudWxsKSB7CiAgICAgICAgdGhpcy5pbml0TG9hZEZyb21GaXJlYmFzZSgpOwogICAgICB9CiAgICB9LAogICAgdXNlckFkZGVkUGxhY2VMaXN0OiBmdW5jdGlvbiB1c2VyQWRkZWRQbGFjZUxpc3QoKSB7CiAgICAgIHRoaXMub25DaGFuZ2VQbGFjZUxpc3QoKTsKICAgIH0sCiAgICBzZWFyY2hSZXN1bHRQbGFjZUxpc3Q6IGZ1bmN0aW9uIHNlYXJjaFJlc3VsdFBsYWNlTGlzdCgpIHsKICAgICAgdGhpcy5vbkNoYW5nZVBsYWNlTGlzdCgpOwogICAgfSwKICAgIG5lYXJieVBsYWNlTGlzdDogZnVuY3Rpb24gbmVhcmJ5UGxhY2VMaXN0KCkgewogICAgICB0aGlzLm9uQ2hhbmdlUGxhY2VMaXN0KCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0TG9hZEZyb21GaXJlYmFzZTogZnVuY3Rpb24gaW5pdExvYWRGcm9tRmlyZWJhc2UoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoImZyaWVuZHMvIiArIHRoaXMudXNlckluZm8udWlkKS5vbigndmFsdWUnLCBmdW5jdGlvbiAoc25hcHNob3QpIHsKICAgICAgICB2YXIgZnJpZWRzaW5mbyA9IHNuYXBzaG90LnZhbCgpOwogICAgICAgIF90aGlzMi5mcmllbmRzTGlzdCA9IFtdOwogICAgICAgIE9iamVjdC5rZXlzKGZyaWVkc2luZm8pLmZvckVhY2goZnVuY3Rpb24gKGZpZCkgewogICAgICAgICAgX3RoaXMyLmZyaWVuZHNMaXN0LnB1c2goewogICAgICAgICAgICAiZnJpZW5kc19pZCI6IGZpZCwKICAgICAgICAgICAgIm5hbWUiOiBmcmllZHNpbmZvW2ZpZF0ubmFtZQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigicGxhY2VzLyIgKyB0aGlzLnVzZXJJbmZvLnVpZCkub24oJ3ZhbHVlJywgZnVuY3Rpb24gKHNuYXBzaG90KSB7CiAgICAgICAgdmFyIHBsYWNlc2luZm8gPSBzbmFwc2hvdC52YWwoKTsKICAgICAgICBfdGhpczIudXNlckFkZGVkUGxhY2VMaXN0ID0gW107CgogICAgICAgIF90aGlzMi51c2VyQWRkZWRQbGFjZUxpc3QucHVzaCh7CiAgICAgICAgICBuYW1lOiAiLS0gVXNlciBTYXZlZCBQbGFjZSAtLSIsCiAgICAgICAgICBwbGFjZV9pZDogbnVsbAogICAgICAgIH0pOwoKICAgICAgICBPYmplY3Qua2V5cyhwbGFjZXNpbmZvKS5mb3JFYWNoKGZ1bmN0aW9uIChwaWQpIHsKICAgICAgICAgIF90aGlzMi51c2VyQWRkZWRQbGFjZUxpc3QucHVzaCh7CiAgICAgICAgICAgICJwbGFjZV9pZCI6IHBpZCwKICAgICAgICAgICAgIm5hbWUiOiBwbGFjZXNpbmZvW3BpZF0ubmFtZQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIG9uRmlsZUNoYW5nZTogZnVuY3Rpb24gb25GaWxlQ2hhbmdlKGUpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgZmlsZXMgPSBlLnRhcmdldC5maWxlcyB8fCBlLmRhdGFUcmFuc2Zlci5maWxlczsKICAgICAgdGhpcy51cGxvYWRGaWxlcyA9IGZpbGVzOwogICAgICBBcnJheS5mcm9tKGZpbGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChmaWxlKSB7CiAgICAgICAgX3RoaXMzLmNyZWF0ZVByZXZpZXdJbWFnZShmaWxlKTsKICAgICAgfSk7IC8vdGhpcy5jcmVhdGVQcmV2aWV3SW1hZ2UoZmlsZXMpCiAgICB9LAogICAgb25DaGFuZ2VQbGFjZUxpc3Q6IGZ1bmN0aW9uIG9uQ2hhbmdlUGxhY2VMaXN0KCkgewogICAgICB0aGlzLnBsYWNlTGlzdCA9IFtdOwogICAgICB2YXIgY29uY2F0MSA9IHRoaXMuc2VhcmNoUmVzdWx0UGxhY2VMaXN0LmNvbmNhdCh0aGlzLm5lYXJieVBsYWNlTGlzdCk7CiAgICAgIHRoaXMucGxhY2VMaXN0ID0gdGhpcy51c2VyQWRkZWRQbGFjZUxpc3QuY29uY2F0KGNvbmNhdDEpOwogICAgfSwKICAgIGNyZWF0ZVByZXZpZXdJbWFnZTogZnVuY3Rpb24gY3JlYXRlUHJldmlld0ltYWdlKGZpbGUpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzNC5wcmV2aWV3SW1hZ2VMaXN0LnB1c2goZS50YXJnZXQucmVzdWx0KTsKICAgICAgfTsKCiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOwogICAgfSwKICAgIHVwbG9hZEltZzogZnVuY3Rpb24gdXBsb2FkSW1nKGZpbGUpIHsKICAgICAgcmV0dXJuIHRoaXMuSVUudXBsb2FkKGZpbGUpOwogICAgfSwKICAgIHVuaXF1ZVN0cjogZnVuY3Rpb24gdW5pcXVlU3RyKCkgewogICAgICB2YXIgc3Ryb25nID0gMTAwMDsKICAgICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpLnRvU3RyaW5nKDE2KSArIE1hdGguZmxvb3Ioc3Ryb25nICogTWF0aC5yYW5kb20oKSkudG9TdHJpbmcoMTYpOwogICAgfSwKICAgIG9uQWRkV2hlcmVCdXR0b246IGZ1bmN0aW9uIG9uQWRkV2hlcmVCdXR0b24oKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgLy90aGlzLndoZXJlQWRk44Gn5qSc57Si44GX44Gm44G/44KLCiAgICAgIHRoaXMuUE0uc2VhcmNocGxhY2VzYnluYW1lKHRoaXMud2hlcmVBZGQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgLy8gc2VsZWN044KS5pu05pawCiAgICAgICAgX3RoaXM1LnNlYXJjaFJlc3VsdFBsYWNlTGlzdCA9IFtdOwoKICAgICAgICBfdGhpczUuc2VhcmNoUmVzdWx0UGxhY2VMaXN0LnB1c2goewogICAgICAgICAgbmFtZTogIi0tIE5ldyBVc2VyIEFkZCAtLSIsCiAgICAgICAgICBwbGFjZV9pZDogbnVsbAogICAgICAgIH0pOwoKICAgICAgICBfdGhpczUuc2VhcmNoUmVzdWx0UGxhY2VMaXN0LnB1c2goewogICAgICAgICAgbmFtZTogX3RoaXM1LndoZXJlQWRkLAogICAgICAgICAgcGxhY2VfaWQ6ICJwaWRfIiArIF90aGlzNS51bmlxdWVTdHIoKQogICAgICAgIH0pOwoKICAgICAgICBfdGhpczUuc2VhcmNoUmVzdWx0UGxhY2VMaXN0LnB1c2goewogICAgICAgICAgbmFtZTogIi0tIFNlYXJjaCBSZXN1bHQgLS0iLAogICAgICAgICAgcGxhY2VfaWQ6IG51bGwKICAgICAgICB9KTsKCiAgICAgICAgcmVzcG9uc2UuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChwbGFjZSkgewogICAgICAgICAgX3RoaXM1LnNlYXJjaFJlc3VsdFBsYWNlTGlzdC5wdXNoKHBsYWNlKTsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coIlBsYWNlcyBNYW5hZ2VyIEVycm9yIiwgZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICBvbkFkZFdob0J1dHRvbjogZnVuY3Rpb24gb25BZGRXaG9CdXR0b24oKSB7CiAgICAgIGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCJmcmllbmRzLyIgKyB0aGlzLnVzZXJJbmZvLnVpZCkucHVzaCh7CiAgICAgICAgIm5hbWUiOiB0aGlzLndob0FkZAogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBhbGVydCgi44OV44Os44Oz44OJ44KS6L+95Yqg44GX44G+44GX44Gf77yBIik7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIC8vb25FcnJvcgogICAgICAgIGNvbnNvbGUubG9nKCJGaXJlYmFzZSBFcnJvciIsIGVycm9yKTsKICAgICAgfSk7CiAgICB9LAogICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIC8vIHN1Ym1pdOWHpueQhgogICAgICAvLyAxLiDnlLvlg4/jgpLjgqLjg4Pjg5fjg63jg7zjg4njgZnjgosKICAgICAgaWYgKHRoaXMudXBsb2FkRmlsZXMgIT0gbnVsbCkgewogICAgICAgIEFycmF5LmZyb20odGhpcy51cGxvYWRGaWxlcykuZm9yRWFjaChmdW5jdGlvbiAoZmlsZSkgewogICAgICAgICAgX3RoaXM2LnVwbG9hZFByb21pc2VMaXN0LnB1c2goX3RoaXM2LnVwbG9hZEltZyhmaWxlKSk7CiAgICAgICAgfSk7CiAgICAgIH0gLy8gMi4g44Ki44OD44OX44Ot44O844OJ44GM5a6M5LqG44GX44Gf44KJ44GZ44G544Gm44Gu5oOF5aCx44KS5ZCI44KP44Gb44GmUmVhbHRpbWVEQuOBq3NldAoKCiAgICAgIFByb21pc2UuYWxsKHRoaXMudXBsb2FkUHJvbWlzZUxpc3QpLnRoZW4oZnVuY3Rpb24gKEltYWdlVXJscykgewogICAgICAgIC8vQVBJ44GL44KJ5biw44Gj44Gm44GN44GfSlNPTuOCkuODkeODvOOCueOBl+OBpuOAgVVSTOOCkumFjeWIl+OBq+OBvuOBqOOCgeOCiwogICAgICAgIEltYWdlVXJscy5mb3JFYWNoKGZ1bmN0aW9uIChqc29uKSB7CiAgICAgICAgICBfdGhpczYuc3VibWl0SW1hZ2VVcmxMaXN0LnB1c2goanNvbi5kYXRhLnVybCk7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIFVzZXJQb3N0SW5mb09iaiA9IHsKICAgICAgICAgIHdoZW46IF90aGlzNi53aGVuLAogICAgICAgICAgd2hlcmU6IF90aGlzNi53aGVyZSwKICAgICAgICAgIHdobzogX3RoaXM2LndobywKICAgICAgICAgIHdoYXQ6IF90aGlzNi53aGF0LAogICAgICAgICAgaW1nVXJsczogX3RoaXM2LnN1Ym1pdEltYWdlVXJsTGlzdAogICAgICAgIH07IC8v5b+F6aCI6aCF55uu44Gu44OB44Kn44OD44KvCgogICAgICAgIGlmIChVc2VyUG9zdEluZm9PYmoud2hlbiAhPSBudWxsICYmIFVzZXJQb3N0SW5mb09iai53aGVyZSAhPSBudWxsICYmIFVzZXJQb3N0SW5mb09iai53aGF0ICE9IG51bGwpIHsKICAgICAgICAgIGlmIChVc2VyUG9zdEluZm9PYmoud2hlbi5yZXBsYWNlKC9ccysvZywgJycpLmxlbmd0aCA+IDAgJiYgVXNlclBvc3RJbmZvT2JqLndoZXJlLnJlcGxhY2UoL1xzKy9nLCAnJykubGVuZ3RoID4gMCAmJiBVc2VyUG9zdEluZm9PYmoud2hhdC5yZXBsYWNlKC9ccysvZywgJycpLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgLy9EQuOBq+S/neWtmAogICAgICAgICAgICBfdGhpczYuc2V0RmlyZWJhc2VSZWFsdGltZURCKFVzZXJQb3N0SW5mb09iaik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhbGVydCgid2hlbiwgd2hlcmUsIHdoYXTjga/lv4XpoIjpoIXnm67jgafjgZkiKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWxlcnQoIndoZW4sIHdoZXJlLCB3aGF044Gv5b+F6aCI6aCF55uu44Gn44GZIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzZXRGaXJlYmFzZVJlYWx0aW1lREI6IGZ1bmN0aW9uIHNldEZpcmViYXNlUmVhbHRpbWVEQihPYmopIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICAvLyBwbGFjZV9pZOOBi+OCieWQjeWJjeOCkuWPluW+lwogICAgICB2YXIgcGxhY2VfbmFtZSA9IG51bGw7CiAgICAgIE9iamVjdC5rZXlzKHRoaXMucGxhY2VMaXN0KS5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7CiAgICAgICAgaWYgKF90aGlzNy5wbGFjZUxpc3Rba10ucGxhY2VfaWQgPT0gT2JqLndoZXJlKSB7CiAgICAgICAgICBwbGFjZV9uYW1lID0gX3RoaXM3LnBsYWNlTGlzdFtrXS5uYW1lOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9KTsgLy8gcGxhY2VfaWTjgajlkI3liY3jgpLkv53lrZgo5ZCM5ZCN44Gn5LiK5pu444GN44GV44KM44KL44Gu44Gn5a2Y5Zyo56K66KqN44Gv44GX44Gq44GEKQoKICAgICAgZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoInBsYWNlcy8iICsgdGhpcy51c2VySW5mby51aWQgKyAiLyIgKyBPYmoud2hlcmUpLnNldCh7CiAgICAgICAgbmFtZTogcGxhY2VfbmFtZQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAvLwogICAgICAgIGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCJwb3N0cy8iICsgX3RoaXM3LnVzZXJJbmZvLnVpZCkucHVzaChPYmopLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgYWxlcnQoIuaKleeov+OBl+OBvuOBl+OBn++8gSIpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgLy9vbkVycm9yCiAgICAgICAgICBjb25zb2xlLmxvZygiRmlyZWJhc2UgRXJyb3IiLCBlcnJvcik7CiAgICAgICAgICBhbGVydCgi5oqV56i/44Gr5aSx5pWX44GX44G+44GX44GfIik7CiAgICAgICAgfSk7IC8vCiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKCJGaXJlYmFzZSBFcnJvciIsIGVycm9yKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBmaXJlYmFzZS5hdXRoKCkub25BdXRoU3RhdGVDaGFuZ2VkKGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgIF90aGlzLmlzU2lnbkluID0gdXNlciAhPSBudWxsOwogICAgICBfdGhpcy51c2VySW5mbyA9IHVzZXI7CiAgICAgIF90aGlzLmlzTm93TG9hZGluZyA9IGZhbHNlOwogICAgfSk7CiAgICB0aGlzLklVID0gbmV3IEltZ1VwbG9hZGVyKGF4aW9zKTsKICAgIHRoaXMuUE0gPSBuZXcgUGxhY2VzTWFuYWdlcihheGlvcyk7IC8vIOePvuWcqOWcsOOCkuWPluW+lwoKICAgIGlmIChuYXZpZ2F0b3IuZ2VvbG9jYXRpb24pIHsKICAgICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbihmdW5jdGlvbiAocG9zaXRpb24pIHsKICAgICAgICB2YXIgZGF0YSA9IHBvc2l0aW9uLmNvb3JkczsKICAgICAgICB2YXIgbGF0ID0gZGF0YS5sYXRpdHVkZTsKICAgICAgICB2YXIgbG9uID0gZGF0YS5sb25naXR1ZGU7IC8vICItMzMuODY3MDUyMiIsICIxNTEuMTk1NzM2MiIKICAgICAgICAvLyDlj5blvpfjgZfjgZ/nj77lnKjlnLDjgpLjgoLjgajjgavov5Hovrrjga7jg6njg7Pjg4njg57jg7zjgq/jgpLlj5blvpcKCiAgICAgICAgX3RoaXM4LlBNLnNlYXJjaG5lYXJieXBsYWNlc2J5bGF0bG9uKGxhdCwgbG9uKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgLy8gc2VsZWN044KS5pu05pawCiAgICAgICAgICBfdGhpczgubmVhcmJ5UGxhY2VMaXN0ID0gW107CgogICAgICAgICAgX3RoaXM4Lm5lYXJieVBsYWNlTGlzdC5wdXNoKHsKICAgICAgICAgICAgbmFtZTogIi0tIEdQUyBSZXN1bHQgLS0iLAogICAgICAgICAgICBwbGFjZV9pZDogbnVsbAogICAgICAgICAgfSk7CgogICAgICAgICAgcmVzcG9uc2UuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChwbGFjZSkgewogICAgICAgICAgICBfdGhpczgubmVhcmJ5UGxhY2VMaXN0LnB1c2gocGxhY2UpOwogICAgICAgICAgfSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiUGxhY2VzIE1hbmFnZXIgRXJyb3IiLCBlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKCJHZW9Mb2NhdGlvbiBBUEkgRXJyb3IiLCBlcnJvcik7CiAgICAgIH0pOwogICAgfSBlbHNlIHsvLyDnq6/mnKvjgYxHZW9Mb2NhdGlvbiBBUEnjgavpnZ7lr77lv5zjgaDjgaPjgZ/loLTlkIgKICAgICAgLy8g5pyA6L+R44Gu5aC05omA44KS6YGp5b2T44Gr6KGo56S6CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["RegistEventInfo.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"regist\">\n    <div class=\"regist__loading\" v-if=\"isNowLoading\"><!-- Loading --></div>\n    <div class=\"regist__body\" v-else>\n      <div class=\"regist__body__signined\" v-if=\"isSignIn\">\n        <!-- form -->\n        <div><input type=\"datetime-local\" placeholder=\"日付\" v-model=\"when\" /></div>\n        <div><select v-model=\"where\"><option disabled value=\"\">場所</option><option v-for=\"(val, key) in placeList\" v-bind:value=\"val.place_id\" v-bind:disabled=\"val.place_id==null\">{{val.name}}</option></select><div><input type=\"text\" v-model=\"whereAdd\" /><button v-on:click=\"onAddWhereButton\">+</button></div></div>\n        <div><select v-model=\"who\"><option disabled value=\"\">誰と行ったか</option><option v-for=\"(val, key) in friendsList\" v-bind:value=\"val.friends_id\">{{val.name}}</option></select><div><input type=\"text\" v-model=\"whoAdd\" /><button v-on:click=\"onAddWhoButton\">+</button></div></div>\n        <div><textarea placeholder=\"したこと\" v-model=\"what\" /></div>\n        <div class=\"imgPreview\">\n          <img v-bind:src=\"src\" v-for=\"(src, key) in previewImageList\" :key=\"key\">\n        </div>\n        <div><input type=\"file\" @change=\"onFileChange\" accept=\"image/*\" multiple /></div>\n        <div><button v-on:click=\"onSubmit\">投稿</button></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport ImgUploader from '../assets/ImgUploader.js'\nimport PlacesManager from '../assets/PlacesManager.js'\nimport firebase from 'firebase'\nvar database = firebase.database()\n\nexport default {\n  name: \"regist\",\n  data () {\n    return {\n      isSignIn: null,\n      userInfo: null,\n      isNowLoading: true,\n      IU: null,\n      PM: null,\n      uploadFiles: null,\n      uploadPromiseList: [],\n      previewImageList: [],\n      submitImageUrlList: [],\n      searchResultPlaceList: [],\n      userAddedPlaceList: [],\n      nearbyPlaceList: [],\n      placeList: [],\n      friendsList: [],\n      whereAdd: null,\n      whoAdd: null,\n      when: null,\n      where: null,\n      who: null,\n      what: null\n    }\n  },\n  watch: {\n    isSignIn(after, before) {\n      if (before == null) {\n        this.initLoadFromFirebase()\n      }\n    },\n    userAddedPlaceList() {\n      this.onChangePlaceList()\n    },\n    searchResultPlaceList() {\n      this.onChangePlaceList()\n    },\n    nearbyPlaceList() {\n      this.onChangePlaceList()\n    }\n  },\n  methods: {\n    initLoadFromFirebase() {\n      firebase.database().ref(\"friends/\"+this.userInfo.uid).on('value', (snapshot) =>{\n        var friedsinfo = snapshot.val()\n        this.friendsList = []\n        Object.keys(friedsinfo).forEach(fid => {\n          this.friendsList.push({\n            \"friends_id\": fid,\n            \"name\": friedsinfo[fid].name\n          })\n        })\n      })\n      firebase.database().ref(\"places/\"+this.userInfo.uid).on('value', (snapshot) =>{\n        var placesinfo = snapshot.val()\n        this.userAddedPlaceList = []\n        this.userAddedPlaceList.push({name: \"-- User Saved Place --\", place_id: null})\n        Object.keys(placesinfo).forEach(pid => {\n          this.userAddedPlaceList.push({\n            \"place_id\": pid,\n            \"name\": placesinfo[pid].name\n          })\n        })\n      })\n    },\n    onFileChange(e) {\n      const files = e.target.files || e.dataTransfer.files;\n      this.uploadFiles = files\n      Array.from(files).forEach(file => {\n        this.createPreviewImage(file)\n      })\n      //this.createPreviewImage(files)\n    },\n    onChangePlaceList() {\n      this.placeList = []\n      var concat1 = this.searchResultPlaceList.concat(this.nearbyPlaceList)\n      this.placeList = this.userAddedPlaceList.concat(concat1)\n    },\n    createPreviewImage(file) {\n      const reader = new FileReader()\n      reader.onload = e => {\n        this.previewImageList.push(e.target.result)\n      }\n      reader.readAsDataURL(file)\n    },\n    uploadImg(file) {\n      return this.IU.upload(file)\n    },\n    uniqueStr() {\n      var strong = 1000\n      return new Date().getTime().toString(16)  + Math.floor(strong*Math.random()).toString(16)\n    },\n    onAddWhereButton() {\n      //this.whereAddで検索してみる\n      this.PM.searchplacesbyname(this.whereAdd).then((response) => {\n        // selectを更新\n        this.searchResultPlaceList = []\n        this.searchResultPlaceList.push({name: \"-- New User Add --\", place_id: null})\n        this.searchResultPlaceList.push({name: this.whereAdd, place_id: \"pid_\"+this.uniqueStr()})\n        this.searchResultPlaceList.push({name: \"-- Search Result --\", place_id: null})\n        response.data.forEach((place) => {\n          this.searchResultPlaceList.push(place)\n        })\n      }).catch((error) => {\n        console.log(\"Places Manager Error\", error)\n      })\n    },\n    onAddWhoButton() {\n      firebase.database().ref(\"friends/\"+this.userInfo.uid).push({\"name\":this.whoAdd}).then(() => {\n        alert(\"フレンドを追加しました！\")\n      })\n      .catch((error) => {\n        //onError\n        console.log(\"Firebase Error\", error)\n      })\n    },\n    onSubmit() {\n      // submit処理\n      // 1. 画像をアップロードする\n      if (this.uploadFiles != null) {\n        Array.from(this.uploadFiles).forEach(file => {\n          this.uploadPromiseList.push(this.uploadImg(file))\n        })\n      }\n      // 2. アップロードが完了したらすべての情報を合わせてRealtimeDBにset\n      Promise.all(this.uploadPromiseList).then((ImageUrls) => {\n        //APIから帰ってきたJSONをパースして、URLを配列にまとめる\n        ImageUrls.forEach((json) => {\n          this.submitImageUrlList.push(json.data.url)\n        })\n        var UserPostInfoObj = {\n          when: this.when,\n          where: this.where,\n          who: this.who,\n          what: this.what,\n          imgUrls: this.submitImageUrlList\n        }\n        //必須項目のチェック\n        if (UserPostInfoObj.when != null && UserPostInfoObj.where != null && UserPostInfoObj.what != null) {\n          if (UserPostInfoObj.when.replace(/\\s+/g,'').length > 0 && UserPostInfoObj.where.replace(/\\s+/g,'').length > 0 && UserPostInfoObj.what.replace(/\\s+/g,'').length > 0) {\n            //DBに保存\n            this.setFirebaseRealtimeDB(UserPostInfoObj)\n          } else {\n            alert(\"when, where, whatは必須項目です\")\n          }\n        } else {\n          alert(\"when, where, whatは必須項目です\")\n        }\n      })\n    },\n    setFirebaseRealtimeDB(Obj) {\n      // place_idから名前を取得\n      var place_name = null\n      Object.keys(this.placeList).forEach(k => {\n        if (this.placeList[k].place_id == Obj.where) {\n          place_name = this.placeList[k].name\n          return true;\n        }\n      })\n      // place_idと名前を保存(同名で上書きされるので存在確認はしない)\n      firebase.database().ref(\"places/\"+this.userInfo.uid+\"/\"+Obj.where).set({name: place_name}).then(() => {\n        //\n        firebase.database().ref(\"posts/\"+this.userInfo.uid).push(Obj).then(() => {\n          alert(\"投稿しました！\")\n        })\n        .catch((error) => {\n          //onError\n          console.log(\"Firebase Error\", error)\n          alert(\"投稿に失敗しました\")\n        })\n        //\n      })\n      .catch((error) => {\n        console.log(\"Firebase Error\", error)\n      })\n    }\n  },\n  mounted() {\n    const _this = this\n\n    firebase.auth().onAuthStateChanged(user => {\n      _this.isSignIn = (user != null)\n      _this.userInfo = user\n      _this.isNowLoading = false\n    })\n\n    this.IU = new ImgUploader(axios)\n    this.PM = new PlacesManager(axios)\n\n    // 現在地を取得\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition((position) => { \n        var data = position.coords\n\t      var lat = data.latitude\n\t      var lon = data.longitude\n        // \"-33.8670522\", \"151.1957362\"\n        // 取得した現在地をもとに近辺のランドマークを取得\n        this.PM.searchnearbyplacesbylatlon(lat, lon).then((response) => {\n          // selectを更新\n          this.nearbyPlaceList = []\n          this.nearbyPlaceList.push({name: \"-- GPS Result --\", place_id: null})\n          response.data.forEach((place) => {\n            this.nearbyPlaceList.push(place)\n          })\n        }).catch((error) => {\n          console.log(\"Places Manager Error\", error)\n        })\n      }, (error) => { console.log(\"GeoLocation API Error\", error) })\n    } else {\n      // 端末がGeoLocation APIに非対応だった場合\n      // 最近の場所を適当に表示\n    }\n\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.regist {\n  width: 100%;\n  height: 100%;\n  &__loading {\n    width: 100%;\n    height: 100%;\n  }\n  &__body {\n    width: 100%;\n    height: 100%;\n    &__signined {\n      width: 100%;\n      height: 100%;\n    }\n  }\n}\n.imgPreview > img {\n  width: 100px;\n}\n</style>"],"sourceRoot":"src/views"}]}